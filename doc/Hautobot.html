<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Hautobot</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Hautobot.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption" class="empty">&nbsp;</p></div><div id="content"><div id="module-header"><p class="caption">Hautobot</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Some Types
</a></li><li><a href="#g:2">Predicates
</a></li><li><a href="#g:3">Transformers
</a></li><li><a href="#g:4">Internal matching
</a></li><li><a href="#g:5">High-level entry points
</a></li><li><a href="#g:6">Examples
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Hautobot is a select-and-transform approach to HTML (and XML)
 templating. It is a highly inferior and highly incomplete
 implementation of the basic ideas in Christophe Grand's Enlive
 library for Clojure (<a href="https://github.com/cgrand/enlive">https://github.com/cgrand/enlive</a>).
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Transform">Transform</a> = Node -&gt; [Node]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Selector">Selector</a> = [[Node -&gt; Bool]]</li><li class="src short"><a href="#v:hasId">hasId</a> :: String -&gt; Node -&gt; Bool</li><li class="src short"><a href="#v:hasTag">hasTag</a> :: String -&gt; Node -&gt; Bool</li><li class="src short"><a href="#v:hasAttr">hasAttr</a> :: String -&gt; Node -&gt; Bool</li><li class="src short"><a href="#v:hasAttrWord">hasAttrWord</a> :: String -&gt; String -&gt; Node -&gt; Bool</li><li class="src short"><a href="#v:hasClass">hasClass</a> :: String -&gt; Node -&gt; Bool</li><li class="src short"><a href="#v:setAttr">setAttr</a> :: String -&gt; String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:setTag">setTag</a> :: String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:modifyAttr">modifyAttr</a> :: String -&gt; (Maybe Text -&gt; Maybe Text) -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:getAttrWords">getAttrWords</a> :: String -&gt; Node -&gt; [Text]</li><li class="src short"><a href="#v:setAttrWords">setAttrWords</a> :: String -&gt; [Text] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:addAttrWord">addAttrWord</a> :: String -&gt; String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:delAttrWord">delAttrWord</a> :: String -&gt; String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:addClass">addClass</a> :: String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:removeClass">removeClass</a> :: String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:replaceWith">replaceWith</a> :: [Node] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:remove">remove</a> :: <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:content">content</a> :: [Node] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:append">append</a> :: [Node] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:prepend">prepend</a> :: [Node] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:at">at</a> :: [(<a href="Hautobot.html#t:Selector">Selector</a>, <a href="Hautobot.html#t:Transform">Transform</a>)] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></li><li class="src short"><a href="#v:checkPreds">checkPreds</a> :: [Node -&gt; Bool] -&gt; Node -&gt; Bool</li><li class="src short"><span class="keyword">data</span>  <a href="#t:Match">Match</a> <ul class="subs"><li>= <a href="#v:Match">Match</a>  </li><li>| <a href="#v:PartialMatch">PartialMatch</a> <a href="Hautobot.html#t:Selector">Selector</a>  </li><li>| <a href="#v:NoMatch">NoMatch</a>  </li></ul></li><li class="src short"><a href="#v:matchSelector">matchSelector</a> :: <a href="Hautobot.html#t:Selector">Selector</a> -&gt; Node -&gt; <a href="Hautobot.html#t:Match">Match</a></li><li class="src short"><a href="#v:runTransforms">runTransforms</a> :: [(<a href="Hautobot.html#t:Selector">Selector</a>, <a href="Hautobot.html#t:Transform">Transform</a>)] -&gt; Document -&gt; Document</li><li class="src short"><a href="#v:transform">transform</a> :: <a href="Hautobot.html#t:Selector">Selector</a> -&gt; <a href="Hautobot.html#t:Transform">Transform</a> -&gt; Document -&gt; Document</li><li class="src short"><a href="#v:transform-39-">transform'</a> :: <a href="Hautobot.html#t:Selector">Selector</a> -&gt; <a href="Hautobot.html#t:Transform">Transform</a> -&gt; [Node] -&gt; [Node]</li><li class="src short"><a href="#v:nmap">nmap</a> :: (Node -&gt; [Node]) -&gt; [Node] -&gt; [[Node]]</li><li class="src short"><a href="#v:docmap">docmap</a> :: (Node -&gt; [Node]) -&gt; Document -&gt; Document</li><li class="src short"><a href="#v:modifyDocContent">modifyDocContent</a> :: ([Node] -&gt; [Node]) -&gt; Document -&gt; Document</li><li class="src short"><a href="#v:testDoc">testDoc</a> :: Document</li><li class="src short"><a href="#v:doTest">doTest</a> :: Document</li><li class="src short"><a href="#v:documentToString">documentToString</a> :: Document -&gt; String</li></ul></div><div id="interface"><h2 id="g:1">Some Types
</h2><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Transform" class="def">Transform</a> = Node -&gt; [Node]</p><div class="doc"><p><code>Transforms</code> take a <code>Node</code>, and return none, one or many <code>Node</code>s.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Selector" class="def">Selector</a> = [[Node -&gt; Bool]]</p><div class="doc"><p>A <code>Selector</code> is a list of lists of predicates. Each inner list
 represents a &quot;descendant step&quot;. That is, each inner list must
 match a single node, and each subsequent inner list must match a
 node inside the previous. Examples:
</p><pre> &quot;a[href]&quot;                       =&gt; [[hasTag &quot;a&quot;, hasAttr &quot;href&quot;]]
 &quot;#name.kls&quot;                     =&gt; [[hasId &quot;name&quot;, hasClass &quot;kls&quot;]]
 &quot;section#name article.story h1&quot; =&gt; [[hasTag &quot;section&quot;, hasId &quot;name&quot;], 
                                     [hasTag &quot;article&quot;, hasClass &quot;story&quot;],
                                     [hasTag &quot;h1&quot;]]
</pre></div></div><h2 id="g:2">Predicates
</h2><div class="top"><p class="src"><a name="v:hasId" class="def">hasId</a> :: String -&gt; Node -&gt; Bool</p><div class="doc"><p>Does the Node have the given id? (case-sensitive both on the
 attribute name <code>id</code>, and on the value.)
</p></div></div><div class="top"><p class="src"><a name="v:hasTag" class="def">hasTag</a> :: String -&gt; Node -&gt; Bool</p><div class="doc"><p>Is the Node an element with the given tag name? (case-sensitive)
</p></div></div><div class="top"><p class="src"><a name="v:hasAttr" class="def">hasAttr</a> :: String -&gt; Node -&gt; Bool</p><div class="doc"><p>Does the Node have an attribute with the given name?
</p></div></div><div class="top"><p class="src"><a name="v:hasAttrWord" class="def">hasAttrWord</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>attribute name
</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>word to look for in attribute value
</p></td></tr><tr><td class="src">-&gt; Node</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; Bool</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Does the Node contain <code>word</code> (space-delimited) within <code>attr</code>?
</p></div></div><div class="top"><p class="src"><a name="v:hasClass" class="def">hasClass</a> :: String -&gt; Node -&gt; Bool</p><div class="doc"><p>Does the Node have the given class?
</p></div></div><h2 id="g:3">Transformers
</h2><div class="top"><p class="src"><a name="v:setAttr" class="def">setAttr</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>attribute name
</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>attribute value
</p></td></tr><tr><td class="src">-&gt; <a href="Hautobot.html#t:Transform">Transform</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Set an attribute (overwriting any existing value)
</p></div></div><div class="top"><p class="src"><a name="v:setTag" class="def">setTag</a> :: String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Rename a tag
</p></div></div><div class="top"><p class="src"><a name="v:modifyAttr" class="def">modifyAttr</a> :: String -&gt; (Maybe Text -&gt; Maybe Text) -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Modify attribute with a function.
 Function is `Maybe (T.Text currentVal) -&gt; Maybe (T.Text newVal)`.
 Returning <code>Nothing</code> will delete the attribue.
</p></div></div><div class="top"><p class="src"><a name="v:getAttrWords" class="def">getAttrWords</a> :: String -&gt; Node -&gt; [Text]</p><div class="doc"><p>Remove an attribute
</p><p>Get an attribute value, split into <code>words</code>
</p></div></div><div class="top"><p class="src"><a name="v:setAttrWords" class="def">setAttrWords</a> :: String -&gt; [Text] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Set an attribute with a list of words
</p></div></div><div class="top"><p class="src"><a name="v:addAttrWord" class="def">addAttrWord</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>attribute name
</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>string to add (doesn't validate for wordiness)
</p></td></tr><tr><td class="src">-&gt; <a href="Hautobot.html#t:Transform">Transform</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Prepend a word to an attribute. (Won't create duplicates.)
</p></div></div><div class="top"><p class="src"><a name="v:delAttrWord" class="def">delAttrWord</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: String</td><td class="doc"><p>attribute name
</p></td></tr><tr><td class="src">-&gt; String</td><td class="doc"><p>word to delete
</p></td></tr><tr><td class="src">-&gt; <a href="Hautobot.html#t:Transform">Transform</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Remove a word from anywhere in an attribute
</p></div></div><div class="top"><p class="src"><a name="v:addClass" class="def">addClass</a> :: String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Add a class name to an element. (Without duplicates.)
</p></div></div><div class="top"><p class="src"><a name="v:removeClass" class="def">removeClass</a> :: String -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Remove a class name from an element
</p></div></div><div class="top"><p class="src"><a name="v:replaceWith" class="def">replaceWith</a> :: [Node] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Replace the node with the provide node(s)
</p></div></div><div class="top"><p class="src"><a name="v:remove" class="def">remove</a> :: <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Remove the Node from the document
</p></div></div><div class="top"><p class="src"><a name="v:content" class="def">content</a> :: [Node] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Replace all of the node's children with the given node(s)
</p></div></div><div class="top"><p class="src"><a name="v:append" class="def">append</a> :: [Node] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Append node(s) after the existing children of this node.
 (i.e. just inside the closing tag of this node.)
</p></div></div><div class="top"><p class="src"><a name="v:prepend" class="def">prepend</a> :: [Node] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p>Prepend node(s) before existing children.
</p></div></div><div class="top"><p class="src"><a name="v:at" class="def">at</a> :: [(<a href="Hautobot.html#t:Selector">Selector</a>, <a href="Hautobot.html#t:Transform">Transform</a>)] -&gt; <a href="Hautobot.html#t:Transform">Transform</a></p><div class="doc"><p><code>at</code> allows you to nest selector-transformations.  You can select
 a node in the usual fashion, then use <code>at</code> to select and transform
 only the children of that node. (This may be a premature
 optimisation. It may also be useful.)
</p></div></div><h2 id="g:4">Internal matching
</h2><div class="top"><p class="src"><a name="v:checkPreds" class="def">checkPreds</a> :: [Node -&gt; Bool] -&gt; Node -&gt; Bool</p><div class="doc"><p>Check a single selector step against a node.
</p></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Match" class="def">Match</a>  </p><div class="doc"><p>data type to represent matches against node. PartialMatch
 represents a so-far-successful multi-step match.
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Match" class="def">Match</a></td><td class="doc"><p>Node matches Selector.
</p></td></tr><tr><td class="src"><a name="v:PartialMatch" class="def">PartialMatch</a> <a href="Hautobot.html#t:Selector">Selector</a></td><td class="doc"><p>Node matches prefix of Selector. Contains
 remaining selector steps to be matched.
</p></td></tr><tr><td class="src"><a name="v:NoMatch" class="def">NoMatch</a></td><td class="doc"><p>Node does not match.
</p></td></tr></table></div></div><div class="top"><p class="src"><a name="v:matchSelector" class="def">matchSelector</a> :: <a href="Hautobot.html#t:Selector">Selector</a> -&gt; Node -&gt; <a href="Hautobot.html#t:Match">Match</a></p><div class="doc"><p>Match a single selector step, returning the appropriate Match.
</p></div></div><h2 id="g:5">High-level entry points
</h2><div class="top"><p class="src"><a name="v:runTransforms" class="def">runTransforms</a> :: [(<a href="Hautobot.html#t:Selector">Selector</a>, <a href="Hautobot.html#t:Transform">Transform</a>)] -&gt; Document -&gt; Document</p><div class="doc"><p>run a list of `(Selector, Transform)` pairs across a document
</p></div></div><div class="top"><p class="src"><a name="v:transform" class="def">transform</a> :: <a href="Hautobot.html#t:Selector">Selector</a> -&gt; <a href="Hautobot.html#t:Transform">Transform</a> -&gt; Document -&gt; Document</p><div class="doc"><p>run a single Selector and Transform across a document
</p></div></div><div class="top"><p class="src"><a name="v:transform-39-" class="def">transform'</a> :: <a href="Hautobot.html#t:Selector">Selector</a> -&gt; <a href="Hautobot.html#t:Transform">Transform</a> -&gt; [Node] -&gt; [Node]</p><div class="doc"><p>As above, but operates on [Node] rather than Document.  Used
 internally, by <code><a href="Hautobot.html#v:at">at</a></code>, and potentially for fragments that don't
 belong to a document.
</p></div></div><div class="top"><p class="src"><a name="v:nmap" class="def">nmap</a> :: (Node -&gt; [Node]) -&gt; [Node] -&gt; [[Node]]</p><div class="doc"><p>A version of <code>map</code> for the list-tree-list structure of <code>[Node]</code>.
</p></div></div><div class="top"><p class="src"><a name="v:docmap" class="def">docmap</a> :: (Node -&gt; [Node]) -&gt; Document -&gt; Document</p><div class="doc"><p>Document-aware <code>map</code>, for the top-level.
</p></div></div><div class="top"><p class="src"><a name="v:modifyDocContent" class="def">modifyDocContent</a> :: ([Node] -&gt; [Node]) -&gt; Document -&gt; Document</p><div class="doc"><p>Document-aware way to apply a function to all Nodes.
</p></div></div><h2 id="g:6">Examples
</h2><div class="top"><p class="src"><a name="v:testDoc" class="def">testDoc</a> :: Document</p><div class="doc"><p>A basic sample document
</p></div></div><div class="top"><p class="src"><a name="v:doTest" class="def">doTest</a> :: Document</p><div class="doc"><p>A (messy) example of some transforms
</p></div></div><div class="top"><p class="src"><a name="v:documentToString" class="def">documentToString</a> :: Document -&gt; String</p><div class="doc"><p>Utility function for debugging and testing.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.9.2</p></div></body></html>